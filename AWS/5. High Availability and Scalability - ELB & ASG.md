## High Availability and Scalability
#EC2 #Availability-Zones #RDS #ElastiCache #Auto-Scaling-Group #RDS #ElastiCache 
Scalability means that an application / system can handle greater loads.
There are two kinds of scalability: **vertical and horizontal.**
Scalability and Availability are linked but separate
### Vertical Scalability
Vertical scalability means **allocating more resources to an application instance**.
For example, if the application runs on a t2.micro, scaling it vertically would mean running it on a t2.large.
This kind of scaling is common for **non-distributed systems** such as a database.
RDS and ElastiCache are vertically-scalable services.
There is usually a limit to how much you can vertically scale.
### Horizontal Scalability
Horizontal scalability means **increasing the number of application instances.**
This kind of scalability implicitly requires the application to be able to be **distributed and parallelised.**
This kind of scaling is common for modern web applications, especially cloud-based applications thanks to services like Amazon EC2.
### Availability
Horizontal scalability usually goes hand in hand with availability. In AWS terms, high availability means **running your application in at least two Availability Zones.**
Availability can be passive (RDS Mutli-AZ) or active (horizontal scaling)
### High Availability & Scalability for EC2
Vertical Scaling: Increase instance size
Horizontal Scaling: Increase number of instances (via **Auto Scaling Group or Load Balancer**)
High Availability: Run multiple instances of the same application across multiple AZs
## Elastic Load Balancing (ELB)
#ELB #EC2 #Auto-Scaling-Group #ECS #CloudWatch #ACM #Route-53 #WAF #Global-Accelerator #Security-Groups #CLB #ALB #NLB #GWLB
Load balancers forward traffic to the most available server (EC2 Instances).
Load balancers act as a single point of access to scalable applications.
They also increase reliability as they can divert traffic away from failed instances
They can separate public traffic from private traffic.
They can perform regular instance health checks
As for the Elastic Load Balancer, it can:
- Provide SSL termination for your websites
- Enforce stickiness with cookies
- Provide high availability across AZs

ELBs are **managed by AWS**, meaning AWS
- Guarantees it will be working
- **Takes care of upgrades, maintenance, and high availability**
- Provides only a few configurable options
It is also **integrated with many AWS offerings**, including
- EC2, EC2 Auto Scaling Groups, ECS
- AWS Certificate Manager (ACM), CloudWatch
- Route 53, AWS WAF, AWS Global Accelerator
Setting up a non-managed load balancer is more effort but less expensive.
Load balancers **operate under security groups**.
### Health Checks
**Health Checks are crucial for Load Balancers** as they allow the load balancer to know if instances are available to forward traffic to.
Health checks are done on a port / route (:/health is common)
**If the response is not code 200 (OK), then the instance is unhealthy**
### Load Balancer Types
AWS has 4 types of managed load balancers:
- Classic Load Balancer (2009) (Deprecated)
- Application Load Balancer (2016)
- Network Load Balancer (2017)
- Gateway Load Balancer (2020)
## Application Load Balancer (ALB)
#ALB #ECS #EC2 #Lambda 
The ALB operates at **Layer 7 (Application - HTTP)**
It can load balance to multiple HTTP applications on the same or different machines.
It supports **HTTP/2 and WebSocket** and **redirects**.
Operates with **~400ms latency.**

Can route traffic to different target groups (machines) based on several criteria:
- URL Path (\e\x\a\m\p\l\e.com/**users** vs \e\x\a\m\p\l\e.com/**posts**)
- URL Hostname (**one.example.com** vs **other.example.com**)
- Query String and Headers (\e\x\a\m\p\l\e.com/users?**id=123&order=false**)
ALBs are a great fit for **micro services** and **container based applications** like Docker and Amazon ECS.
The ALB has a port mapping feature to **redirect to a dynamic port** in ECS.
### ALB Target Groups
- EC2 Instances
- ECS Tasks
- Lambda Functions
- Private IP Addresses
The ALB can route to more than one group at a time.
**Health checks are performed at this level too.**
![[5.1 Application Load Balancer.svg]]
## Network Load Balancer (NLB)
#NLB #Availability-Zones #Elastic-IP #EC2 #ALB 
The NLB operates at **Layer 4 (Transport - TCP / UDP).**
It can handle **millions of requests per second.**
The NLB has **one static IP per AZ but supports Elastic IPs.**
Operates with **~100ms latency.**
**NLB Health Checks support TCP, HTTP, and HTTPS protocols.**
![[5.2 Network Load Balancer.svg]]
### NLB Target Groups
- EC2 Instances
- Private IP Addresses
- ALB
## Gateway Load Balancer (GWLB)
## ELB - Sticky Sessions
## ELB - Cross Zone Load Balancing
## ELB - SSL Certificates
## ELB - Connection Draining
## Auto Scaling Groups (ASG) Overview
## ASG - Scaling Policies