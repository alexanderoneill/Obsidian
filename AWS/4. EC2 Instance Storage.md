## EBS Overview
An EBS (Elastic Block Store) Volume is a **network drive** that can be **attached to instances during runtime.**
It allows the **persisting of data between instance terminations**.
They **can only be mounted (attached) to one instance at a time unless Multi-Attach is invoked**.
They are **bound to a specific AZ.**
The Free tier of AWS allows up to 30GiB of EBS General Purpose Storage (SSD) or Magnetic per month.

An EBS Volume is a network drive, meaning that both network bandwidth and disk IO speed can be bottlenecks. The tradeoff for this is that they can be swapped between EC2 instances quickly.
EBS Volumes are locked to an AZ **unless you use snapshots to migrate the contents**.
EBS Volumes have a provisioned capacity in GiBs and IOPS and **you will be billed for the entirety of this capacity regardless of if it is used**. This capacity can be increased.
![[4.1 EBS Volumes Example.svg]]

EBS Volumes are **volatile by default** but can be made non-volatile by **disabling the Delete on Termination attribute** via the AWS Console or AWS CLI.
## EBS Snapshots
EBS Snapshots can be used to make a **backup of an EBS Volume**.
It is **recommended (but not necessary)** to **detach a volume before snapshotting it**.
Snapshots are **not bound to any AZ**.
![[4.2 EBS Snapshots.svg]]
### EBS Snapshot Features
EBS Snapshot Archive
- Move a snapshot to an "archive tier" that is **75% cheaper**
- Takes **24-72 hours to restore** the snapshot
EBS Snapshot Recycle Bin
- Setup rules to **retain deleted snapshots** to allow for recovery after accidental deletion
- The retention period can be specified between **1 day to 1 year**
Fast Snapshot Restore (FSR)
- **Force full initialisation** of the snapshot to **eliminate latency on first use**
- **Expensive**
## AMI Overview
Amazon Machine Images (AMIs) are **customised EC2 Instances**, allowing for custom software, configurations, OSs, monitoring systems, etc. **Usually has a faster boot / config** as all the software is pre-packaged.
AMIs are built for a specific region, and can be copied across regions.
AMI configurations can be **provided by AWS** (Public AMI), **developed in-house**, or **bought from a third-party** vendor (AWS Marketplace AMI).

To create an AMI, you **start with a base EC2 Instance**, adjusting configurations and installing software as desired.
You then must **stop the instance** to preserve data integrity.
You then **create an AMI from the EC2 Instance**, this will copy configurations and installed packages, OSs, etc. This will also create EBS snapshots.
Launch an **EC2 Instance via this new AMI**.
## EC2 Instance Store
While EBS Volumes are network drives with good but limited performance, EC2 Instance Stores are **high-performance hardware disks**.
Instance Stores generally have **better IO performance but are volatile**.
They are good for **buffers, caches, scratch data**, etc.
Their volatility means they are **vulnerable to hardware failure**.
**Backups and replication are the user's responsibility**.
### EC2 Instance Store Types
|Instance Size|100% Random Read IOPS|Write IOPS|
|--|--|--|
|i3.large|100,125|35,000|
|i3.xlarge|206,250|70,000|
|i3.2xlarge|412,500|180,000|
|i3.4xlarge|825,000|360,000|
|i3.8xlarge|1,650,000|720,000|
|i3.16xlarge|3,300,000|1,400,000|
|i3.metal|3,300,000|1,400,000|
|i3en.large|42,500|32,500|
|i3en.xlarge|85,000|65,000|
|i3en.2xlarge|170,000|130,000|
|i3en.3xlarge|250,000|200,000|
|i3en.6xlarge|500,000|400,000|
|i3en.12xlarge|1,000,000|800,000|
|i3en.24xlarge|2,000,000|1,600,000|
|i3en.metal|2,000,000|1,600,000|
## EBS Volume Types
EBS Volumes come in 6 types:
- gp2/gp3 (SSD): General purpose SSD volumes, **balance of performance and price**
- io1/io2 (SSD): **High performance SSD** for **mission-critical low-latency** or **high-throughput workloads**
- st1 (HDD): Low cost HDD volume designed for **frequently accessed high-throughput workloads**
- sc1 (HDD): Low cost HDD volume designed for **less frequently accessed workloads**
EBS Volumes are characterised by Size, Throughput, and IOPS.
**Only gp2/gp3 and io1/io2 can be used as boot volumes**.
### GP2 / GP3
GP2
- Small gp2 volumes can **burst IOPS to 3,000**
- Volume size and IOPS are linked, **max IOPS is 16,00**
- **3 IOPS per GiB -> 5,334GiB is max**
GP3
- Baseline of **3,000 IOPS**
- Baseline of **125MiB/s throughput**
- Can increase IOPs and throughput to **16,000** and **1,000MiB/s** respectively
Use cases:
- Cost effective storage
- System boot volumes
- Virtual desktops
- Test environments
### IO1 / IO2
IOPS are provisioned
IO1 / IO2
- Min 4GiB - Max 16TiB
- Max IOPS on 64,000 for Nitro EC2 instances and 32,000 for all others
- Can increase IOPS independently from storage size
- io2 has more durability and more IOPS per GiB than io1 despite being the same price
IO2 Block Express
- Sub-millisecond latency
- Max IOPS of 256,000
- IOPS : GiB ratio of 1,000 : 1
## EBS Multi-Attach
## EBS Encryption
## Amazon EFS
## EFS vs EBS