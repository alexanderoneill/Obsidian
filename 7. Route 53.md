# DNS Terminologies
- DNS: Domain Name Service
- Domain Registrar: Amazon Route 53, GoDaddy, etc.
- DNS Records: A, AAAA, CNAME, NS, etc.
- Zone File: contains DNS records
- Name Server: Resolves DNS queries (Can be Authoritative or Non-Authoritative)
- Top Level Domain: .com, .gov, .co.uk, etc.
- Second Level Domain: amazon.com, google.com, etc.
![[7.1 URL Breakdown.png]]![[7.2 DNS Breakdown.png]]
# Route 53 Overview
- A highly available, scalable, fully managed and Authoritative DNS
	- Authoritative means the customer (you) can update the DNS records
- Route 53 is also a Domain Registrar
- Provides health check functionality
- Only AWS service which provides 100% availability SLA (Service Level Agreement) (contractually obliged to offer 100% availability)
- 53 is a reference to the traditional DNS port
- A record in Route 53 details how you want to route traffic for a domain
- Each record contains:
	- Domain / Subdomain Name  (example.com)
	- Record Type (A, AAAA)
	- Value (12.34.56.78)
	- Routing Policy (See below)
	- TTL (Time to Live) (Lifespan of a DNS record in client memory)
- Route 53 supports the following DNS record types
	- (Must know) A / AAAA / CNAME / NS
		- A - IPv4
		- AAAA - IPv6
		- CNAME - Canonical Name (Domain Alias)
			- Target must have an A or AAAA record
		- NS - Name Server (Delegates a DNS zone to use given authoritative name servers)
	- (Advanced only) CAA / DS / MX / NAPTR / PTR / SOA / TXT / SPF / SRV
A Hosted Zone is a container for records that define how to route traffic to a domain and its subdomains
- Public Hosted Zones - Routes traffic on the public Internet
- Private Hosted Zones - Routes traffic within one or more VPCs
Hosted Zone charge = $0.50/mo
In this context, "routing" just means a mapping of hostnames to network addresses.
## Public vs Private Hosted Zones
![[7.3 Public vs Private Hosted Zones.png]]
# Route 53 - TTL
TTL (Time To Live) is the value that dictates how long a DNS record is kept in client memory. A higher value would typically be around 24 hours, which is suitable if there is less traffic on Route 53, but brings with it the possibility of the client accessing outdated records. A lower TTL would be something like 60 seconds, which is suitable for high traffic networks, improving their responsiveness to record changes.
TTL is a mandatory value in the DNS record except for Alias records.
# Route 53 - CNAME vs Alias
AWS resources like Load Balancers or CloudFront expose an AWS hostname. A CNAME record points a hostname to any other hostname, it only works for non-root domains. Alias records point a hostname to an AWS resource, they work for both root domain and non root domain. Alias records are also free of charge.
## Alias Records
- Maps a hostname to an AWS resource
- Extension to DNS functionality
- Automatically recognises changes in the resource's IP address
- Can be used for top node of DNS namespace (Zone Apex) e.g. example.com
- Alias records are always of type A / AAAA for AWS resources.
- TTL cannot be set / adjusted
- Possible targets include:
	- ELB
	- CloudFront Distributions
	- API Gateway
	- Elastic Beanstalk environments
	- S3 Websites
	- VPC Interface Endpoints
	- Global Accelerator
	- Other Route 53 record hosted in the same zone
- You cannot set an alias record for an EC2 DNS name
# Route 53 - Health Checks
- HTTP Health Checks are only for public resources
- Health Check => Automated DNS Failover
	- Health checks that monitor an endpoint
	- Health checks that monitor other health checks
	- Health checks that monitor CloudWatch alarms (Better for full control of triggers)
- Endpoint Monitoring
	- About 15 global health checkers will check the endpoint health
	- Healthy / Unhealthy Threshold = 18% (3) by default
	- Interval = 30 seconds (shorter intervals cost more)
	- Supported protocols = HTTP, HTTPS, TCP
	- 
# Route 53 - Third Party Domains
# Routing Policy - Simple
- Route traffic to a single resource
- Can specify multiple values in the same record
- If multiple values are returned, the client chooses one at random
- When alias is enabled, specify only one AWS resource
- Can't be associated with Health Checks
![[7.4 Simple Routing.png]]
# Routing Policy - Weighted
- Control the % of requests that go to each specific resource
- Assign each record a relative weight
- DNS records must have the same name and type
- Can be associated with Health Checks
- Use cases: load balancing between regions, testing new application versions
- Assign a weight of 0 to a record to stop sending traffic to that resource
- If all records have 0 weight then all records will be returned equally
![[7.5 Weighted Routing.png]]
# Routing Policy - Latency
- Redirect traffic to the resource that has the least latency relative to the client
- Latency is based on traffic between users and AWS regions
- Germany users might be directed to the US if that is the lowest latency available
- Can be associated with Health Checks and failover
![[7.6 Latency Routing.png]]
# Routing Policy - Geolocation
# Routing Policy - Geoproximity
# Routing Policy - IP Based
# Routing Policy - Failover

# Routing Policy - Multi Value
# Cleanup